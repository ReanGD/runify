syntax = "proto3";

package runify;

option go_package = "./pb";

message Empty {

}

message CardItem {
	uint64 cardID = 1;
	string name = 2;
	string icon = 3;
}

message SelectedCard {
	uint64 cardID = 1;
}

message ActionItem {
	uint32 actionID = 1;
	string name = 2;
}

message Actions {
	repeated ActionItem items = 1;
}

message SelectedAction {
	uint32 actionID = 1;
	uint64 cardID = 2;
}

message Form {
	string layout = 1;
	repeated CardItem cards = 2;
}

message HideWindow {
	string error = 1;
}

message Result {
	oneof payload {
		Form form = 1;
		Empty empty = 2;
		HideWindow hide = 3;
	}
}

service Runify {
	rpc GetRoot(Empty) returns (Form) {}
	rpc GetActions(SelectedCard) returns (Actions) {}
	rpc ExecuteDefault(SelectedCard) returns (Result) {}
	rpc Execute(SelectedAction) returns (Result) {}
}
